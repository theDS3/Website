---
import Particles from 'astro-particles';
import type { ISourceOptions } from 'tsparticles-engine';

import particleJSOptions from '../particlesjs.json';
import '../styles/main.scss';
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="/favicon.svg"
    />
    <meta
      name="viewport"
      content="width=device-width"
    />
    <meta
      name="generator"
      content={Astro.generator}
    />
    <title>Astro</title>
  </head>
  <body>
    <slot />
    <Particles
      id="tsparticles"
      options={particleJSOptions as ISourceOptions}
      init="particlesInit"
    />
  </body>

  <script>
    import {
      type Container,
      type Engine,
      tsParticles,
    } from 'tsparticles-engine';
    import { loadFull } from 'tsparticles';

    // the function name is the parameter passed to the init attribute
    // required
    // add the function to window is mandatory, it will be searched there
    window.particlesInit = async function (engine: Engine) {
      await loadFull(engine);
    };

    // the function name is the parameter passed to the loaded attribute
    // optional
    // add the function to window is mandatory, it will be searched there
    window.particlesLoaded = function (container: Container) {
      console.log('particlesLoaded callback');
    };
  </script>
</html>
